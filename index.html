<!DOCTYPE html> 
<html lang="en" ng-app="app">
  
<head>  
	<meta charset="UTF-8"> 
	<title>{{'write-message.title' | translate }}</title>
    <link rel="stylesheet" type="text/css" href="third/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
</head> 
  
<body class="margen-body">
    <div ng-controller="Ctrl" ng-cloak>
    	<div class="row">
	    	<h3 class="margen-head">
	    		{{'write-message.title' | translate }}
	    		<button type="button"
		    		class="btn btn-primary"
		    		ng-click="addMessage()" >
		    		{{'new-message.button' | translate }}
	    		</button>
    		</h3>
		</div>
      <!-- message -->
      <div class="show-grid margen-message" ng-show="state"> 		
		<form name="messageForm" ng-submit="saveMessage()">
			<div class="row no-margin">
				<!-- input message -->
				<div class="col-lg-10 col-md-8 col-sm-5 col-xs-6">
			  		<input 	type="text"
			  				class="form-control"
			  				name="message" 
			  				placeholder="{{'markers-position.message' | translate }}"	
				  			ng-model="message"
				  			ng-maxlength="200"
				  			autofocus="true">
				  	<!-- using angular-message -->
					<div ng-show="messageForm.message.$error.maxlength" class="error-label">
						{{'characters-max.message' | translate }}
					</div>			  			
			  	</div>			  	
			  	<div>		
			  		<!-- button save -->	  	
			  		<button type="submit" 
			  				class="btn btn-success" 
			  				ng-disabled="!message">
			  				{{'save-message.button' | translate }}
			  		</button>	
			  		<!-- button cancel -->
			  		<button type="button" 
			  				class="btn btn-cancelar" 
			  				ng-click="cancelMessage()">
			  				{{'cancel.button' | translate }}
			  		</button>			  		
			  	</div>	    
			</div>		
		</form>
      </div> 	  

		<!-- show items message --> 		
		<div class="row col-lg-12 item-box" ng-repeat="item in messageList">
			<div class="col-sm-11 col-xs-10">
				<h4 class="ellipsis">{{item.message}}</h4>
			</div>

			<!-- Menu edit delete -->
			<div 	class="item-menu dropdown" 
					data-toggle="tooltip" 
					title="{{'menu.tooltip' | translate }}" tooltip>
			  <span class="btn glyphicon glyphicon-option-horizontal" 
			  		aria-hidden="true"
			     	id="dropdownMenu1" 
			     	data-toggle="dropdown" 
			     	aria-haspopup="true" 
			     	aria-expanded="true">				     		
			  </span>
			  <ul 	class="dropdown-menu dropdown-menu-right"
			  		aria-labelledby="dropdownMenu1">
			    <li>
			    	<a 	href="#" 
			    		ng-click="initUpdated(item)">
			    		{{'menu.edit' | translate }}
			    	</a>
			    </li>
			    <li>
			    	<a 	href="#" 
			    		ng-click="modalShowConfirmDelete(item.message)">
			    		{{'menu.delete' | translate }}
			    	</a>
			    </li>
			  </ul>
			</div>	
		</div>

	<!-- Modal confirm -->
		<div id="idModalConfirmDelete" class="modal fade" role="dialog"> 
			<div class="modal-dialog">		
			    <div class="modal-content">
			      	<!-- Modal header --> 	
			      	<div class="modal-header">
			        	<button type="button" 
			        			class="close" 	
			        			data-dismiss="modal">&times;
			        	</button>
			        	<h4 class="modal-title">{{'confirm-action.title' | translate }}</h4>
			      	</div>
			      	<!--form-->
		      		<div>
				      	<div class="modal-body">	 
				        	<div class="row margen-item">
				        		<div class="test texto">
				        			{{'sure-delete-message.title' | translate }} "{{message}}"?
				        		</div>
				        	</div>				
				      	</div>
					      <div class="modal-footer">
					        <button type="button" class="btn btn-cancelar" data-dismiss="modal">
					        	{{'cancel.button' | translate }}
					        </button>
					        <button type="submit" 
					        		class="btn btn-primary"
					        		ng-click="deleteMessage(item.id)">{{'continue.button' | translate }}
					        </button>
					      </div>	      			
		      		</div>  
			    </div>
			</div>
		</div>

    </div>

	<script type="text/javascript" src="third/angular.min.js"></script>
	<script type="text/javascript" src="third/js/angular-messages.js"></script>
	<script type="text/javascript" src="third/js/jquery-3.1.1.min.js"></script>
	<script type="text/javascript" src="third/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript" src="services/message-service.js"></script>
    <script type="text/javascript" src="common/util.js"></script>
    <script type="text/javascript" src="mocks/mock.js"></script>
    <script type="text/javascript" src="i18n/i18n.js"></script>
    <script type="text/javascript" src="i18n/locale_en.js"></script>
    <script type="text/javascript" src="i18n/locale_es.js"></script>
    
</body>
</html>